<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<table id="dg" title="属性列表" class="easyui-datagrid" style="width:100%;height:100%" data-options="fitColumns:true,singleSelect:true,toolbar:'#tb'">
    <thead>
    <tr>
        <th data-options="field:'id',width:100">编码</th>
        <th data-options="field:'attrName',width:100">属性名称</th>
    </tr>
    </thead>
</table>

<div id="tb">
    <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-add',plain:true">添加</a>
    <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-edit',plain:true">编辑</a>
    <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-remove',plain:true">删除</a>

    <div>
        一级分类：<input id="ctg1ForAttrList"/>
        二级分类：<input id="ctg2ForAttrList"/>
        三级分类：<input id="ctg3ForAttrList"/>
        <a id="reloadAttrList">刷新属性列表</a>
    </div>


</div>

    <script type="application/javascript">

        function reloadAttrList(catalog3Id) {

            if (catalog3Id == null || catalog3Id == "") {
                catalog3Id = $("#ctg3ForAttrList").combobox("getValue");
            }

            //判断
            $("#dg").datagrid({
                url:"attrInfoList/"+catalog3Id
            });
        }

        $(function () {
            $('#ctg1ForAttrList').combobox({
                url:'catalog1List',
                valueField:'id',
                textField:'name',
                onSelect: function(rec){
                    $('#ctg2ForAttrList').combobox('clear');
                    $('#ctg3ForAttrList').combobox('clear');
                    var url = 'catalog2List/' + rec.id;
                    $('#ctg2ForAttrList').combobox('reload', url);
                }
            });

            $('#ctg2ForAttrList').combobox({
                valueField:'id',
                textField:'name',
                onSelect: function(rec){
                    $('#ctg3ForAttrList').combobox('clear');
                    var url = 'catalog3List/' + rec.id;
                    $('#ctg3ForAttrList').combobox('reload', url);
                }
            });

            $('#ctg3ForAttrList').combobox({
                valueField:'id',
                textField:'name',
                onSelect:function(rec){
                    reloadAttrList(rec.id);
                }
            });

            $("#reloadAttrList").linkbutton({
                iconCls:'icon-search',
                onClick:reloadAttrList
            });
        });

    </script>

</body>
</html>